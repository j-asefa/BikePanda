<!DOCTYPE html>
<html>
  <head>
    <title>Simple Map</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    <style>
      #map {
        height: 100%;
      }
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
  </head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
  <body>
    <div id="map"></div>
    <script>
      var map;
      var pathCoordninates = [];
      var minLong;
      var maxLong;
      var minLat;
      var maxLat;
      var latitude = 0;
      var longitude = 0;
      var latLng = 0;
      $.ajax(
          {
              url:'./staticmapsdata.php',
              dataType:'json',
              async: 'false',
              type: 'get',
              data: { tripid: 1},

              success: function(data){
                  var i;

                  minLong = maxLong = data[0].longitude;
                  minLat = maxLat = data[0].latitude;
                  for ( i = 1; i < data.length; i++){
                    latitude = data[i].latitude;
                    longitude = data[i].longitude;

                    if(latitude < minLat){
			    minLat = latitude;
                    }
                    if (latitude > maxLat){
			    maxLat = latitude;
                    }
                    if (longitude < minLong){
			    minLong = longitude;
                    }
                    if (longitude > maxLong){
			    maxLong = longitude;
                    }
                   pathCoordninates.push( new google.maps.LatLng( latitude, longitude));
                  }
              },
              error: function(){}
          });
latitude = (maxLat - minLat) / 2;
longitude = (maxLong - minLong) / 2;
function initMap() {
setTimeout(function() {
 latLng = new google.maps.LatLng( latitude, longitude);
  var map = new google.maps.Map(document.getElementById('map'), {
    zoom: 3,
    center: latLng,
    mapTypeId: 'terrain'
  });

  var flightPath = new google.maps.Polyline({
    path: pathCoordninates,
    geodesic: true,
    strokeColor: '#FF0000',
    strokeOpacity: 1.0,
    strokeWeight: 2
  });

  flightPath.setMap(map);
}, 1000);
}
/*    function initMap() {

		latitude = (maxLat - minLat) / 2;
		longitude = (maxLong - minLong) / 2;

		var map = new google.maps.Map(document.getElementById('map'), {
		  zoom: 3,
		  center: new google.maps.LatLng( latitude, longitude),
		  mapTypeId: 'terrain'
		});

		var flightPath = new google.maps.Polyline({
		  path: pathCoordninates,
		  geodesic: true,
		  strokeColor: '#FF0000',
		  strokeOpacity: 1.0,
		  strokeWeight: 2
		});

		flightPath.setMap(map);

    }*/
    </script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBeasNGrKh3vL9EkHJlVEP3VhSQpk4frNU&callback=initMap">setTimeout(initMap(), 10000); </script>
  </body>
</html>
